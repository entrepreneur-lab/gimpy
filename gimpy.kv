ScreenManager:
    SettingsScreen:
    ViewerScreen:

<SettingsScreen>:
    name: "settings"
    loadfile: None
    savepath: None

<ViewerScreen>:
    name: "viewer"

<LoadDialog>:
    title: "Load settings from .json file"
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: './'
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Load"
                on_release:
                    app.root.get_screen("settings").loadfile = filechooser.selection[0]
                    root.dismiss()
            Button:
                text: "Cancel"
                on_release: root.dismiss()

<SaveDialog>:
    title: "Save settings as .json file"
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: './'
        TextInput:
            id: dialog_savename
            size_hint_y: None
            height: 30
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Save"
                on_release: root.save_file(filechooser.path)
            Button:
                text: "Cancel"
                on_release: root.dismiss()
